{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:05:10"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxtnvt0004r6vnn9jhhtmh\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxtnvt0004r6vnn9jhhtmh\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxtnvt0004r6vnn9jhhtmh\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxtnvt0004r6vnn9jhhtmh\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"in_app\\\",\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"system_error\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"in_app\\\",\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"system_error\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:05:10"}
{"filters":{},"level":"info","message":"Get agents request","pagination":{},"timestamp":"2025-08-02 13:05:10","userId":"cmdtxtnxg0002r6vlycxlky3v"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get agents \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-02 13:05:11"}
{"clientVersion":"6.13.0","level":"error","message":"Get agents failed \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-02 13:05:11"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:11"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to create notification channel \nInvalid `prisma.notificationChannel.create()` invocation:\n\n{\n  data: {\n    type: \"in_app\",\n          ~~~~~~~~\n    name: \"In-App Channel\",\n    enabled: true,\n    configuration: \"{\\\"maxNotifications\\\":100}\"\n  }\n}\n\nInvalid value for argument `type`. Expected NotificationChannelType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationChannel.create()` invocation:\n\n{\n  data: {\n    type: \"in_app\",\n          ~~~~~~~~\n    name: \"In-App Channel\",\n    enabled: true,\n    configuration: \"{\\\"maxNotifications\\\":100}\"\n  }\n}\n\nInvalid value for argument `type`. Expected NotificationChannelType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.createNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:213:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:286:23)","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxto0c000hr6vlfb0vctqj","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxto0m000lr6vlu2dr1kbt","timestamp":"2025-08-02 13:05:11"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxto0t000vr6vn9rq4nyxh\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxto0t000vr6vn9rq4nyxh\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:11"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxto11000wr6vnzb6fe6ar\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxto11000wr6vnzb6fe6ar\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxto11000wr6vnzb6fe6ar\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxto11000wr6vnzb6fe6ar\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:11"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxto1d000xr6vnqr6o0qad\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxto1d000xr6vnqr6o0qad\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxto1d000xr6vnqr6o0qad\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxto1d000xr6vnqr6o0qad\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxto1o000nr6vlhjnp7r73","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxto1v000pr6vlmf7dzafv","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxto22000rr6vlh4sx7q0o","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/invalid-agent-id","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxto2g000vr6vl64bmopzv","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxto2o000xr6vlrgxfpacm","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxto2t000zr6vl4hj2vfpa","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:05:11"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:05:11"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:05:11"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:05:27"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu0tw0004r60koxi39ap7\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxu0tw0004r60koxi39ap7\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu0tw0004r60koxi39ap7\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxu0tw0004r60koxi39ap7\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"in_app\\\",\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"system_error\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"in_app\\\",\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"system_error\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:27"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:27"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to create notification channel \nInvalid `prisma.notificationChannel.create()` invocation:\n\n{\n  data: {\n    type: \"in_app\",\n          ~~~~~~~~\n    name: \"In-App Channel\",\n    enabled: true,\n    configuration: \"{\\\"maxNotifications\\\":100}\"\n  }\n}\n\nInvalid value for argument `type`. Expected NotificationChannelType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationChannel.create()` invocation:\n\n{\n  data: {\n    type: \"in_app\",\n          ~~~~~~~~\n    name: \"In-App Channel\",\n    enabled: true,\n    configuration: \"{\\\"maxNotifications\\\":100}\"\n  }\n}\n\nInvalid value for argument `type`. Expected NotificationChannelType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.createNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:213:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:286:23)","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxu0z4000hr60i0qae1tcx","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxu106000lr60ieimoc0nf","timestamp":"2025-08-02 13:05:27"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu10e000vr60kf9lyjjsp\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu10e000vr60kf9lyjjsp\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:27"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu10p000wr60k4rj9zjxt\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxu10p000wr60k4rj9zjxt\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu10p000wr60k4rj9zjxt\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxu10p000wr60k4rj9zjxt\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:27"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu115000xr60kd24l2x12\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxu115000xr60kd24l2x12\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu115000xr60kd24l2x12\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxu115000xr60kd24l2x12\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxu11u000nr60i8dz3g8dj","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxu127000pr60ittgw5vhv","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxu12d000rr60ixzkyrg41","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/invalid-agent-id","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxu12y000vr60i97f5a7vh","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:28"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:28"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:28"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:28"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:05:28"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:05:28"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:05:28"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:05:28"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:05:55"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxumju0004r67ik5t2jvii\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxumju0004r67ik5t2jvii\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxumju0004r67ik5t2jvii\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxumju0004r67ik5t2jvii\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:55"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxumn9000hr67ge7zu4eyr","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxumnn000lr67g4p99e2un","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:55"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxumoa000sr67ic60s2okc\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxumoa000sr67ic60s2okc\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:56"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxumot000tr67i888u28es\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxumot000tr67i888u28es\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxumot000tr67i888u28es\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxumot000tr67i888u28es\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxump3000nr67gvvfmn4y7","timestamp":"2025-08-02 13:05:56"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxump6000ur67imqflxtth\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxump6000ur67imqflxtth\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxump6000ur67imqflxtth\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxump6000ur67imqflxtth\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxump7000pr67gcp9daotu","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxumpc000rr67gjvzgn6ai","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/invalid-agent-id","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxumpl000vr67g4yj534df","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxumpt000xr67g7xxfhen0","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxumpz000zr67gw0613vjf","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxumq50011r67g592tz44i","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxumqa0013r67ggmx8l738","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/invalid-agent-id","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxumqf0017r67gvbjid154","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxumqi0019r67g96zqn4x8/health","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxumql001cr67gvzmrz9mu/health","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/cmdtxumqn001fr67gbzyzkogt/health-check","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/cmdtxumqr001hr67gu8sj9hgi/health-check","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/invalid-agent-id/health-check","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/cmdtxumr8001lr67g5wl73au2/health-check","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/cmdtxumrc001nr67gmj853vns/health-config","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:05:56"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:05:56"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:05:56"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:06:18"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv3t20004r6c8asf0t6jf\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxv3t20004r6c8asf0t6jf\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv3t20004r6c8asf0t6jf\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxv3t20004r6c8asf0t6jf\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:06:18"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv3wx000sr6c8o7x8aw85\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv3wx000sr6c8o7x8aw85\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:06:18"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv3xi000tr6c856kz0ml1\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxv3xi000tr6c856kz0ml1\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv3xi000tr6c856kz0ml1\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxv3xi000tr6c856kz0ml1\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxv3xx000hr6c9ah97ikij","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxv3y8000lr6c9qo17q5g9","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxv3yz000nr6c9gfxf3c6d","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxv3z5000pr6c9lehy27td","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxv3za000rr6c9z25ugpf1","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/invalid-agent-id","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxv3zp000vr6c9jdwr7x3n","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxv3zt000xr6c97nnpcwdo","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxv400000zr6c9j1b4x03r","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxv4030011r6c9t83p1r9j","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxv4050013r6c9aaf0hmzn","timestamp":"2025-08-02 13:06:18"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv40h000ur6c8z2xupqt6\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxv40h000ur6c8z2xupqt6\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv40h000ur6c8z2xupqt6\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxv40h000ur6c8z2xupqt6\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:06:18"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:07:01"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1i30004r6iqn8m8uzln\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxw1i30004r6iqn8m8uzln\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1i30004r6iqn8m8uzln\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxw1i30004r6iqn8m8uzln\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:02"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:02"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:02"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxw1po000hr6ioosuce49p","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxw1qc000lr6iox6fy7tzw","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:02"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1qh000sr6iqqnafp1mj\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1qh000sr6iqqnafp1mj\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:02"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1sq000tr6iqzs9p5yqt\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxw1sq000tr6iqzs9p5yqt\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1sq000tr6iqzs9p5yqt\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxw1sq000tr6iqzs9p5yqt\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:02"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1u1000ur6iq09s4j61k\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxw1u1000ur6iq09s4j61k\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1u1000ur6iq09s4j61k\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxw1u1000ur6iq09s4j61k\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:07:02"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:07:02"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:07:02"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:07:28"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmdq0004r6nr9tkx4cxi\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxwmdq0004r6nr9tkx4cxi\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmdq0004r6nr9tkx4cxi\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxwmdq0004r6nr9tkx4cxi\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:29"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:07:29"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:29"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:29"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:29"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:29"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:29"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:29"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxwml2000hr6npgs7b3dva","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxwmli000lr6npuvntmquh","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxwmpa000nr6npp1owgj7e","timestamp":"2025-08-02 13:07:29"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmpa000sr6nrk4gwdk0e\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmpa000sr6nrk4gwdk0e\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxwmph000pr6npyf7p2av9","timestamp":"2025-08-02 13:07:29"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmpk000tr6nru1v0y5kp\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxwmpk000tr6nru1v0y5kp\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmpk000tr6nru1v0y5kp\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxwmpk000tr6nru1v0y5kp\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxwmpn000rr6np04hpsfva","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/invalid-agent-id","timestamp":"2025-08-02 13:07:29"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmpv000ur6nry5nle5ox\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxwmpv000ur6nry5nle5ox\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmpv000ur6nry5nle5ox\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxwmpv000ur6nry5nle5ox\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxwmpz000vr6nph7ijgu4c","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxwmq6000xr6npiypk3qgb","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxwmqb000zr6np7guqooqm","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxwmqk0011r6nps3b2pqjo","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxwmqr0013r6npdsughp3n","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/invalid-agent-id","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:07:29"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:07:55"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:07:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7bk0004r6tiwarzm3pm\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxx7bk0004r6tiwarzm3pm\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7bk0004r6tiwarzm3pm\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxx7bk0004r6tiwarzm3pm\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:07:56"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:56"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7jt000sr6tib5u186a6\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7jt000sr6tib5u186a6\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:56"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7kc000tr6tip3ov3zkz\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxx7kc000tr6tip3ov3zkz\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7kc000tr6tip3ov3zkz\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxx7kc000tr6tip3ov3zkz\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:56"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7kq000ur6tii1ncilj9\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxx7kq000ur6tii1ncilj9\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7kq000ur6tii1ncilj9\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxx7kq000ur6tii1ncilj9\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxx7kv000hr6tg10be86cv","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxx7mg000lr6tg4ofkag36","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxx7py000nr6tg6jht34ig","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxx7q6000pr6tg095ddmub","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxx7qn000rr6tgex713ath","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/invalid-agent-id","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxx7r6000vr6tgggvxsvwt","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxx7rn000xr6tgqigsw8mu","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:07:56"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:08:15"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmhv0004r6xxw3bcikw3\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxxmhv0004r6xxw3bcikw3\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmhv0004r6xxw3bcikw3\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxxmhv0004r6xxw3bcikw3\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:16"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmv2000sr6xx1d7tlyu8\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmv2000sr6xx1d7tlyu8\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:16"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmvd000tr6xxhw64pxyt\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxxmvd000tr6xxhw64pxyt\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmvd000tr6xxhw64pxyt\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxxmvd000tr6xxhw64pxyt\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxxmws000hr6xvilpth79w","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:08:16"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmxw000ur6xxdb6wvm9y\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxxmxw000ur6xxdb6wvm9y\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmxw000ur6xxdb6wvm9y\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxxmxw000ur6xxdb6wvm9y\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxxmy8000lr6xvwqavf5bc","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:08:16"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:08:39"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5310004r62ji3epwctv\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxy5310004r62ji3epwctv\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5310004r62ji3epwctv\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxy5310004r62ji3epwctv\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:08:39"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:39"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:08:40"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:40"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:40"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:40"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:40"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:40"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:40"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:40"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxy5ax000hr62hy89c3was","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:08:40"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5d0000sr62jnkofjyjs\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5d0000sr62jnkofjyjs\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxy5d4000lr62htx935bx4","timestamp":"2025-08-02 13:08:40"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5dj000tr62j7le3kzzk\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxy5dj000tr62j7le3kzzk\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5dj000tr62j7le3kzzk\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxy5dj000tr62j7le3kzzk\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:08:40"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5e1000ur62jbvnxz0v7\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxy5e1000ur62jbvnxz0v7\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5e1000ur62jbvnxz0v7\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxy5e1000ur62jbvnxz0v7\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxy5fd000nr62h5ju504kx","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:08:40"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:08:40"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:08:40"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:09:33"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:09:33"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzb6x0004r6a86401wubh\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxzb6x0004r6a86401wubh\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzb6x0004r6a86401wubh\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxzb6x0004r6a86401wubh\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:09:34"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:09:34"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzbkr000sr6a8mtr4bpby\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzbkr000sr6a8mtr4bpby\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:09:34"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:09:34"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzbl9000tr6a8kpperg2y\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxzbl9000tr6a8kpperg2y\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzbl9000tr6a8kpperg2y\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxzbl9000tr6a8kpperg2y\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:09:34"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:09:34"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzblp000ur6a8mnx5xo6j\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxzblp000ur6a8mnx5xo6j\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzblp000ur6a8mnx5xo6j\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxzblp000ur6a8mnx5xo6j\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:09:34"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:09:34"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:09:34"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxzbr2000hr6a5q7vstucx","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxzbrm000lr6a54mcdulge","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:09:35"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:09:35"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:09:35"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-03 18:00:34"}
{"level":"info","message":"Audit logs table initialized successfully","timestamp":"2025-08-03 18:00:34"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-03 18:00:34"}
{"filters":{},"level":"info","message":"Get agents request","pagination":{},"timestamp":"2025-08-03 18:00:35","userId":"cmdvntejm0002r6wzrozbumgw"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get agents \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 18:00:35"}
{"clientVersion":"6.13.0","level":"error","message":"Get agents failed \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 18:00:35"}
{"filters":{"status":"ACTIVE"},"level":"info","message":"Get agents request","pagination":{},"timestamp":"2025-08-03 18:00:35","userId":"cmdvntejm0002r6wzrozbumgw"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get agents \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {\n    status: \"ACTIVE\"\n  },\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {\n    status: \"ACTIVE\"\n  },\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 18:00:35"}
{"clientVersion":"6.13.0","level":"error","message":"Get agents failed \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {\n    status: \"ACTIVE\"\n  },\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {\n    status: \"ACTIVE\"\n  },\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 18:00:35"}
{"filters":{"search":"Agent 1"},"level":"info","message":"Get agents request","pagination":{},"timestamp":"2025-08-03 18:00:35","userId":"cmdvntejm0002r6wzrozbumgw"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get agents \nInvalid `prisma.agent.count()` invocation:\n\n{\n  select: {\n    _count: {\n      select: {\n        _all: true\n      }\n    }\n  },\n  where: {\n    OR: [\n      {\n        name: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      },\n      {\n        description: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      }\n    ]\n  }\n}\n\nUnknown argument `mode`. Did you mean `lte`? Available options are marked with ?.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.count()` invocation:\n\n{\n  select: {\n    _count: {\n      select: {\n        _all: true\n      }\n    }\n  },\n  where: {\n    OR: [\n      {\n        name: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      },\n      {\n        description: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      }\n    ]\n  }\n}\n\nUnknown argument `mode`. Did you mean `lte`? Available options are marked with ?.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:342:21)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 18:00:35"}
{"clientVersion":"6.13.0","level":"error","message":"Get agents failed \nInvalid `prisma.agent.count()` invocation:\n\n{\n  select: {\n    _count: {\n      select: {\n        _all: true\n      }\n    }\n  },\n  where: {\n    OR: [\n      {\n        name: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      },\n      {\n        description: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      }\n    ]\n  }\n}\n\nUnknown argument `mode`. Did you mean `lte`? Available options are marked with ?.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.count()` invocation:\n\n{\n  select: {\n    _count: {\n      select: {\n        _all: true\n      }\n    }\n  },\n  where: {\n    OR: [\n      {\n        name: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      },\n      {\n        description: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      }\n    ]\n  }\n}\n\nUnknown argument `mode`. Did you mean `lte`? Available options are marked with ?.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:342:21)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 18:00:35"}
{"filters":{},"level":"info","message":"Get agents request","pagination":{"limit":"1","page":"1"},"timestamp":"2025-08-03 18:00:35","userId":"cmdvntejm0002r6wzrozbumgw"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-03 18:00:35"}
{"errors":[{"code":"invalid_value","message":"Invalid option: expected one of \"ACTIVE\"|\"INACTIVE\"|\"ERROR\"|\"MAINTENANCE\"","path":["status"],"values":["ACTIVE","INACTIVE","ERROR","MAINTENANCE"]}],"level":"warn","message":"Validation failed","method":"GET","path":"/","source":"query","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvnten5000hr6wzti3maten","level":"info","message":"Get agent by ID request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejm0002r6wzrozbumgw"}
{"agentId":"invalid-agent-id","level":"info","message":"Get agent by ID request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejm0002r6wzrozbumgw"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdvntenc000lr6wz3i5qfovi","timestamp":"2025-08-03 18:00:35"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"cmdvntejq0003r6wzu7dixy8l"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"cmdvntejq0003r6wzu7dixy8l","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvntenp000nr6wz8szj2dg2","interval":30000,"level":"info","message":"Health monitoring started","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvntenp000nr6wz8szj2dg2","level":"info","message":"Agent registered successfully","name":"New Test Agent","platformId":"cmdvntejq0003r6wzu7dixy8l","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvntenp000nr6wz8szj2dg2","level":"info","message":"Agent created successfully","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"cmdvntejq0003r6wzu7dixy8l"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejj0000r6wzfq307fa3"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"cmdvntejq0003r6wzu7dixy8l","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvntenu000pr6wzglewhpfs","interval":30000,"level":"info","message":"Health monitoring started","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvntenu000pr6wzglewhpfs","level":"info","message":"Agent registered successfully","name":"New Test Agent","platformId":"cmdvntejq0003r6wzu7dixy8l","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvntenu000pr6wzglewhpfs","level":"info","message":"Agent created successfully","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejj0000r6wzfq307fa3"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"POST","path":"/","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 18:00:35","userId":"cmdvntejm0002r6wzrozbumgw","userRole":"VIEWER"}
{"errors":[{"code":"too_small","inclusive":true,"message":"Agent name is required","minimum":1,"origin":"string","path":["name"]}],"level":"warn","message":"Validation failed","method":"POST","path":"/","source":"body","timestamp":"2025-08-03 18:00:35"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"cmdvntejq0003r6wzu7dixy8l"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"cmdvntejq0003r6wzu7dixy8l","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvnteo4000rr6wzgwutcamr","interval":30000,"level":"info","message":"Health monitoring started","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvnteo4000rr6wzgwutcamr","level":"info","message":"Agent registered successfully","name":"New Test Agent","platformId":"cmdvntejq0003r6wzu7dixy8l","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvnteo4000rr6wzgwutcamr","level":"info","message":"Agent created successfully","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"cmdvntejq0003r6wzu7dixy8l"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"cmdvntejq0003r6wzu7dixy8l","timestamp":"2025-08-03 18:00:35"}
{"level":"error","message":"Failed to register agent Agent with external ID new-test-agent-001 already exists on platform cmdvntejq0003r6wzu7dixy8l","stack":"Error: Agent with external ID new-test-agent-001 already exists on platform cmdvntejq0003r6wzu7dixy8l\n    at AgentService.registerAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:164:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:289:21","timestamp":"2025-08-03 18:00:35"}
{"level":"error","message":"Create agent failed Agent with external ID new-test-agent-001 already exists on platform cmdvntejq0003r6wzu7dixy8l","stack":"Error: Agent with external ID new-test-agent-001 already exists on platform cmdvntejq0003r6wzu7dixy8l\n    at AgentService.registerAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:164:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:289:21","timestamp":"2025-08-03 18:00:35"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"invalid-platform-id"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"invalid-platform-id","timestamp":"2025-08-03 18:00:35"}
{"level":"error","message":"Failed to register agent Platform with ID invalid-platform-id not found","stack":"Error: Platform with ID invalid-platform-id not found\n    at AgentService.registerAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:148:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:289:21","timestamp":"2025-08-03 18:00:35"}
{"level":"error","message":"Create agent failed Platform with ID invalid-platform-id not found","stack":"Error: Platform with ID invalid-platform-id not found\n    at AgentService.registerAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:148:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:289:21","timestamp":"2025-08-03 18:00:35"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvnteoz000tr6wz4nkmlt0o","level":"info","message":"Update agent request","timestamp":"2025-08-03 18:00:35","updateData":{"capabilities":["test","automation","updated"],"configuration":"[REDACTED]","description":"Updated description","name":"Updated Test Agent","status":"ACTIVE"},"userId":"cmdvntejl0001r6wz5pcv5epc"}
{"agentId":"cmdvnteoz000tr6wz4nkmlt0o","level":"info","message":"Updating agent","timestamp":"2025-08-03 18:00:35","updateData":{"capabilities":["test","automation","updated"],"configuration":{"newFeature":true,"testMode":false},"description":"Updated description","name":"Updated Test Agent","status":"ACTIVE"}}
{"agentId":"cmdvnteoz000tr6wz4nkmlt0o","level":"info","message":"Agent updated successfully","name":"Updated Test Agent","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvnteoz000tr6wz4nkmlt0o","level":"info","message":"Agent updated successfully","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"agentId":"cmdvntep7000vr6wzkbiv8t7i","level":"info","message":"Update agent request","timestamp":"2025-08-03 18:00:35","updateData":{"name":"Updated by Admin"},"userId":"cmdvntejj0000r6wzfq307fa3"}
{"agentId":"cmdvntep7000vr6wzkbiv8t7i","level":"info","message":"Updating agent","timestamp":"2025-08-03 18:00:35","updateData":{"name":"Updated by Admin"}}
{"agentId":"cmdvntep7000vr6wzkbiv8t7i","level":"info","message":"Agent updated successfully","name":"Updated by Admin","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvntep7000vr6wzkbiv8t7i","level":"info","message":"Agent updated successfully","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejj0000r6wzfq307fa3"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"PUT","path":"/cmdvntepd000xr6wzjlfvcsn0","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 18:00:35","userId":"cmdvntejm0002r6wzrozbumgw","userRole":"VIEWER"}
{"agentId":"invalid-agent-id","level":"info","message":"Update agent request","timestamp":"2025-08-03 18:00:35","updateData":{"name":"Updated Name"},"userId":"cmdvntejl0001r6wz5pcv5epc"}
{"agentId":"invalid-agent-id","level":"info","message":"Updating agent","timestamp":"2025-08-03 18:00:35","updateData":{"name":"Updated Name"}}
{"level":"error","message":"Failed to update agent Agent with ID invalid-agent-id not found","stack":"Error: Agent with ID invalid-agent-id not found\n    at AgentService.updateAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:225:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:362:21","timestamp":"2025-08-03 18:00:35"}
{"level":"error","message":"Update agent failed Agent with ID invalid-agent-id not found","stack":"Error: Agent with ID invalid-agent-id not found\n    at AgentService.updateAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:225:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:362:21","timestamp":"2025-08-03 18:00:35"}
{"errors":[{"code":"too_small","inclusive":true,"message":"Too small: expected string to have >=1 characters","minimum":1,"origin":"string","path":["name"]},{"code":"invalid_value","message":"Invalid option: expected one of \"ACTIVE\"|\"INACTIVE\"|\"MAINTENANCE\"","path":["status"],"values":["ACTIVE","INACTIVE","MAINTENANCE"]}],"level":"warn","message":"Validation failed","method":"PUT","path":"/cmdvntepk0011r6wz7hnw03xd","source":"body","timestamp":"2025-08-03 18:00:35"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdvntepm0013r6wzsxf0amn7","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvntepp0015r6wzru58lcj2","level":"info","message":"Delete agent request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejj0000r6wzfq307fa3"}
{"agentId":"cmdvntepp0015r6wzru58lcj2","level":"info","message":"Deleting agent","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvntepp0015r6wzru58lcj2","level":"info","message":"Agent deleted successfully","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvntepp0015r6wzru58lcj2","level":"info","message":"Agent deleted successfully","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejj0000r6wzfq307fa3"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"DELETE","path":"/cmdvntepu0017r6wzpdjcaaac","requiredRoles":["ADMIN"],"timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc","userRole":"OPERATOR"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"DELETE","path":"/cmdvntepx0019r6wz4svuyhrv","requiredRoles":["ADMIN"],"timestamp":"2025-08-03 18:00:35","userId":"cmdvntejm0002r6wzrozbumgw","userRole":"VIEWER"}
{"agentId":"invalid-agent-id","level":"info","message":"Delete agent request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejj0000r6wzfq307fa3"}
{"agentId":"invalid-agent-id","level":"info","message":"Deleting agent","timestamp":"2025-08-03 18:00:35"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to delete agent \nInvalid `prisma.agent.delete()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.","meta":{"cause":"No record was found for a delete.","modelName":"Agent"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.agent.delete()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.deleteAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:385:7)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:419:7","timestamp":"2025-08-03 18:00:35"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Delete agent failed \nInvalid `prisma.agent.delete()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.","meta":{"cause":"No record was found for a delete.","modelName":"Agent"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.agent.delete()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.deleteAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:385:7)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:419:7","timestamp":"2025-08-03 18:00:35"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdvnteq3001dr6wzub6lfnu3","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvnteq6001fr6wz3i6b5rca","level":"info","message":"Get agent health request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejm0002r6wzrozbumgw"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdvnteqb001ir6wzihfv7lr7/health","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvnteqe001lr6wz4ebttp0i","level":"info","message":"Manual health check request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"level":"error","message":"Health check failed No adapter found for platform cmdvntejq0003r6wzu7dixy8l","stack":"Error: No adapter found for platform cmdvntejq0003r6wzu7dixy8l\n    at AgentService.performHealthCheck (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:570:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:517:22","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvnteqe001lr6wz4ebttp0i","level":"info","message":"Manual health check completed","status":"unhealthy","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"POST","path":"/cmdvnteqi001or6wzqlpsu5v2/health-check","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 18:00:35","userId":"cmdvntejm0002r6wzrozbumgw","userRole":"VIEWER"}
{"agentId":"invalid-agent-id","level":"info","message":"Manual health check request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"level":"error","message":"Health check failed Agent with ID invalid-agent-id not found","stack":"Error: Agent with ID invalid-agent-id not found\n    at AgentService.performHealthCheck (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:565:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:517:22","timestamp":"2025-08-03 18:00:35"}
{"agentId":"invalid-agent-id","level":"info","message":"Manual health check completed","status":"unhealthy","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/cmdvnterf001tr6wzgdq3jxqc/health-check","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvnterh001vr6wznwerg3vh","config":{"enabled":true,"interval":60000,"retries":3,"timeout":15000},"level":"info","message":"Configure health monitoring request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"agentId":"cmdvnterh001vr6wznwerg3vh","config":{"enabled":true,"interval":60000,"retries":3,"timeout":15000},"level":"info","message":"Configuring health monitoring","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvnterh001vr6wznwerg3vh","interval":60000,"level":"info","message":"Health monitoring started","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvnterh001vr6wznwerg3vh","level":"info","message":"Health monitoring configured","timestamp":"2025-08-03 18:00:35"}
{"agentId":"cmdvnterh001vr6wznwerg3vh","level":"info","message":"Health monitoring configured","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"errors":[{"code":"too_small","inclusive":true,"message":"Too small: expected number to be >=1000","minimum":1000,"origin":"number","path":["interval"]},{"code":"too_big","inclusive":true,"maximum":60000,"message":"Too big: expected number to be <=60000","origin":"number","path":["timeout"]},{"code":"too_big","inclusive":true,"maximum":5,"message":"Too big: expected number to be <=5","origin":"number","path":["retries"]}],"level":"warn","message":"Validation failed","method":"POST","path":"/cmdvnterm001xr6wzy67rn5m2/health-config","source":"body","timestamp":"2025-08-03 18:00:35"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"POST","path":"/cmdvnterq001zr6wztjeph65b/health-config","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 18:00:35","userId":"cmdvntejm0002r6wzrozbumgw","userRole":"VIEWER"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/cmdvnters0021r6wzxr27te8b/health-config","timestamp":"2025-08-03 18:00:35"}
{"level":"info","message":"Agent discovery request","platformId":"cmdvntejq0003r6wzu7dixy8l","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"level":"info","message":"Starting agent discovery","platformId":"cmdvntejq0003r6wzu7dixy8l","timestamp":"2025-08-03 18:00:35"}
{"discovered":0,"errors":["No adapter found for platform Test Platform"],"level":"info","message":"Agent discovery completed","registered":0,"timestamp":"2025-08-03 18:00:35","updated":0}
{"level":"info","message":"Agent discovery completed","result":{"discovered":0,"errors":["No adapter found for platform Test Platform"],"registered":0,"updated":0},"timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"level":"info","message":"Agent discovery request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"level":"info","message":"Starting agent discovery","timestamp":"2025-08-03 18:00:35"}
{"discovered":0,"errors":["No adapter found for platform Test Platform"],"level":"info","message":"Agent discovery completed","registered":0,"timestamp":"2025-08-03 18:00:35","updated":0}
{"level":"info","message":"Agent discovery completed","result":{"discovered":0,"errors":["No adapter found for platform Test Platform"],"registered":0,"updated":0},"timestamp":"2025-08-03 18:00:35","userId":"cmdvntejl0001r6wz5pcv5epc"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"POST","path":"/discover","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 18:00:35","userId":"cmdvntejm0002r6wzrozbumgw","userRole":"VIEWER"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-03 18:00:35"}
{"level":"info","message":"Get health monitoring status request","timestamp":"2025-08-03 18:00:35","userId":"cmdvntejm0002r6wzrozbumgw"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-03 18:00:35"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-03 18:00:35"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-03 18:00:35"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-03 22:25:22"}
{"level":"info","message":"Audit logs table initialized successfully","timestamp":"2025-08-03 22:25:22"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-03 22:25:22"}
{"filters":{},"level":"info","message":"Get agents request","pagination":{},"timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd70002r6g1ufsjbsns"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get agents \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 22:25:22"}
{"clientVersion":"6.13.0","level":"error","message":"Get agents failed \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 22:25:22"}
{"filters":{"status":"ACTIVE"},"level":"info","message":"Get agents request","pagination":{},"timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd70002r6g1ufsjbsns"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get agents \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {\n    status: \"ACTIVE\"\n  },\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {\n    status: \"ACTIVE\"\n  },\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 22:25:22"}
{"clientVersion":"6.13.0","level":"error","message":"Get agents failed \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {\n    status: \"ACTIVE\"\n  },\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {\n    status: \"ACTIVE\"\n  },\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 22:25:22"}
{"filters":{"search":"Agent 1"},"level":"info","message":"Get agents request","pagination":{},"timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd70002r6g1ufsjbsns"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get agents \nInvalid `prisma.agent.count()` invocation:\n\n{\n  select: {\n    _count: {\n      select: {\n        _all: true\n      }\n    }\n  },\n  where: {\n    OR: [\n      {\n        name: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      },\n      {\n        description: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      }\n    ]\n  }\n}\n\nUnknown argument `mode`. Did you mean `lte`? Available options are marked with ?.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.count()` invocation:\n\n{\n  select: {\n    _count: {\n      select: {\n        _all: true\n      }\n    }\n  },\n  where: {\n    OR: [\n      {\n        name: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      },\n      {\n        description: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      }\n    ]\n  }\n}\n\nUnknown argument `mode`. Did you mean `lte`? Available options are marked with ?.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:342:21)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 22:25:22"}
{"clientVersion":"6.13.0","level":"error","message":"Get agents failed \nInvalid `prisma.agent.count()` invocation:\n\n{\n  select: {\n    _count: {\n      select: {\n        _all: true\n      }\n    }\n  },\n  where: {\n    OR: [\n      {\n        name: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      },\n      {\n        description: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      }\n    ]\n  }\n}\n\nUnknown argument `mode`. Did you mean `lte`? Available options are marked with ?.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.count()` invocation:\n\n{\n  select: {\n    _count: {\n      select: {\n        _all: true\n      }\n    }\n  },\n  where: {\n    OR: [\n      {\n        name: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      },\n      {\n        description: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      }\n    ]\n  }\n}\n\nUnknown argument `mode`. Did you mean `lte`? Available options are marked with ?.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:342:21)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 22:25:22"}
{"filters":{},"level":"info","message":"Get agents request","pagination":{"limit":"1","page":"1"},"timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd70002r6g1ufsjbsns"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-03 22:25:22"}
{"errors":[{"code":"invalid_value","message":"Invalid option: expected one of \"ACTIVE\"|\"INACTIVE\"|\"ERROR\"|\"MAINTENANCE\"","path":["status"],"values":["ACTIVE","INACTIVE","ERROR","MAINTENANCE"]}],"level":"warn","message":"Validation failed","method":"GET","path":"/","source":"query","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xf9000hr6g1guyufc72","level":"info","message":"Get agent by ID request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd70002r6g1ufsjbsns"}
{"agentId":"invalid-agent-id","level":"info","message":"Get agent by ID request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd70002r6g1ufsjbsns"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdvx9xff000lr6g103qm7u6q","timestamp":"2025-08-03 22:25:22"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"cmdvx9xd90003r6g1uicy0cha"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"cmdvx9xd90003r6g1uicy0cha","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xfr000nr6g1ijh7t2i1","interval":30000,"level":"info","message":"Health monitoring started","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xfr000nr6g1ijh7t2i1","level":"info","message":"Agent registered successfully","name":"New Test Agent","platformId":"cmdvx9xd90003r6g1uicy0cha","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xfr000nr6g1ijh7t2i1","level":"info","message":"Agent created successfully","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"cmdvx9xd90003r6g1uicy0cha"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd50000r6g1vjwb8ag7"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"cmdvx9xd90003r6g1uicy0cha","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xfw000pr6g1e00dyu81","interval":30000,"level":"info","message":"Health monitoring started","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xfw000pr6g1e00dyu81","level":"info","message":"Agent registered successfully","name":"New Test Agent","platformId":"cmdvx9xd90003r6g1uicy0cha","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xfw000pr6g1e00dyu81","level":"info","message":"Agent created successfully","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd50000r6g1vjwb8ag7"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"POST","path":"/","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd70002r6g1ufsjbsns","userRole":"VIEWER"}
{"errors":[{"code":"too_small","inclusive":true,"message":"Agent name is required","minimum":1,"origin":"string","path":["name"]}],"level":"warn","message":"Validation failed","method":"POST","path":"/","source":"body","timestamp":"2025-08-03 22:25:22"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"cmdvx9xd90003r6g1uicy0cha"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"cmdvx9xd90003r6g1uicy0cha","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xg7000rr6g1vlz8lmmg","interval":30000,"level":"info","message":"Health monitoring started","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xg7000rr6g1vlz8lmmg","level":"info","message":"Agent registered successfully","name":"New Test Agent","platformId":"cmdvx9xd90003r6g1uicy0cha","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xg7000rr6g1vlz8lmmg","level":"info","message":"Agent created successfully","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"cmdvx9xd90003r6g1uicy0cha"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"cmdvx9xd90003r6g1uicy0cha","timestamp":"2025-08-03 22:25:22"}
{"level":"error","message":"Failed to register agent Agent with external ID new-test-agent-001 already exists on platform cmdvx9xd90003r6g1uicy0cha","stack":"Error: Agent with external ID new-test-agent-001 already exists on platform cmdvx9xd90003r6g1uicy0cha\n    at AgentService.registerAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:164:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:289:21","timestamp":"2025-08-03 22:25:22"}
{"level":"error","message":"Create agent failed Agent with external ID new-test-agent-001 already exists on platform cmdvx9xd90003r6g1uicy0cha","stack":"Error: Agent with external ID new-test-agent-001 already exists on platform cmdvx9xd90003r6g1uicy0cha\n    at AgentService.registerAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:164:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:289:21","timestamp":"2025-08-03 22:25:22"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"invalid-platform-id"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"invalid-platform-id","timestamp":"2025-08-03 22:25:22"}
{"level":"error","message":"Failed to register agent Platform with ID invalid-platform-id not found","stack":"Error: Platform with ID invalid-platform-id not found\n    at AgentService.registerAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:148:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:289:21","timestamp":"2025-08-03 22:25:22"}
{"level":"error","message":"Create agent failed Platform with ID invalid-platform-id not found","stack":"Error: Platform with ID invalid-platform-id not found\n    at AgentService.registerAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:148:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:289:21","timestamp":"2025-08-03 22:25:22"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xgq000tr6g1gz2scm1a","level":"info","message":"Update agent request","timestamp":"2025-08-03 22:25:22","updateData":{"capabilities":["test","automation","updated"],"configuration":"[REDACTED]","description":"Updated description","name":"Updated Test Agent","status":"ACTIVE"},"userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"agentId":"cmdvx9xgq000tr6g1gz2scm1a","level":"info","message":"Updating agent","timestamp":"2025-08-03 22:25:22","updateData":{"capabilities":["test","automation","updated"],"configuration":{"newFeature":true,"testMode":false},"description":"Updated description","name":"Updated Test Agent","status":"ACTIVE"}}
{"agentId":"cmdvx9xgq000tr6g1gz2scm1a","level":"info","message":"Agent updated successfully","name":"Updated Test Agent","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xgq000tr6g1gz2scm1a","level":"info","message":"Agent updated successfully","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"agentId":"cmdvx9xgv000vr6g14pl6bz6b","level":"info","message":"Update agent request","timestamp":"2025-08-03 22:25:22","updateData":{"name":"Updated by Admin"},"userId":"cmdvx9xd50000r6g1vjwb8ag7"}
{"agentId":"cmdvx9xgv000vr6g14pl6bz6b","level":"info","message":"Updating agent","timestamp":"2025-08-03 22:25:22","updateData":{"name":"Updated by Admin"}}
{"agentId":"cmdvx9xgv000vr6g14pl6bz6b","level":"info","message":"Agent updated successfully","name":"Updated by Admin","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xgv000vr6g14pl6bz6b","level":"info","message":"Agent updated successfully","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd50000r6g1vjwb8ag7"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"PUT","path":"/cmdvx9xgz000xr6g1uh02frmj","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd70002r6g1ufsjbsns","userRole":"VIEWER"}
{"agentId":"invalid-agent-id","level":"info","message":"Update agent request","timestamp":"2025-08-03 22:25:22","updateData":{"name":"Updated Name"},"userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"agentId":"invalid-agent-id","level":"info","message":"Updating agent","timestamp":"2025-08-03 22:25:22","updateData":{"name":"Updated Name"}}
{"level":"error","message":"Failed to update agent Agent with ID invalid-agent-id not found","stack":"Error: Agent with ID invalid-agent-id not found\n    at AgentService.updateAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:225:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:362:21","timestamp":"2025-08-03 22:25:22"}
{"level":"error","message":"Update agent failed Agent with ID invalid-agent-id not found","stack":"Error: Agent with ID invalid-agent-id not found\n    at AgentService.updateAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:225:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:362:21","timestamp":"2025-08-03 22:25:22"}
{"errors":[{"code":"too_small","inclusive":true,"message":"Too small: expected string to have >=1 characters","minimum":1,"origin":"string","path":["name"]},{"code":"invalid_value","message":"Invalid option: expected one of \"ACTIVE\"|\"INACTIVE\"|\"MAINTENANCE\"","path":["status"],"values":["ACTIVE","INACTIVE","MAINTENANCE"]}],"level":"warn","message":"Validation failed","method":"PUT","path":"/cmdvx9xh40011r6g1t1occcgu","source":"body","timestamp":"2025-08-03 22:25:22"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdvx9xh70013r6g1vpfnziew","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xh90015r6g1l4nuasab","level":"info","message":"Delete agent request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd50000r6g1vjwb8ag7"}
{"agentId":"cmdvx9xh90015r6g1l4nuasab","level":"info","message":"Deleting agent","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xh90015r6g1l4nuasab","level":"info","message":"Agent deleted successfully","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xh90015r6g1l4nuasab","level":"info","message":"Agent deleted successfully","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd50000r6g1vjwb8ag7"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"DELETE","path":"/cmdvx9xhc0017r6g176hmavpm","requiredRoles":["ADMIN"],"timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g","userRole":"OPERATOR"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"DELETE","path":"/cmdvx9xhf0019r6g1jky1huoe","requiredRoles":["ADMIN"],"timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd70002r6g1ufsjbsns","userRole":"VIEWER"}
{"agentId":"invalid-agent-id","level":"info","message":"Delete agent request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd50000r6g1vjwb8ag7"}
{"agentId":"invalid-agent-id","level":"info","message":"Deleting agent","timestamp":"2025-08-03 22:25:22"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to delete agent \nInvalid `prisma.agent.delete()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.","meta":{"cause":"No record was found for a delete.","modelName":"Agent"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.agent.delete()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.deleteAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:385:7)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:419:7","timestamp":"2025-08-03 22:25:22"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Delete agent failed \nInvalid `prisma.agent.delete()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.","meta":{"cause":"No record was found for a delete.","modelName":"Agent"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.agent.delete()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.deleteAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:385:7)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:419:7","timestamp":"2025-08-03 22:25:22"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdvx9xhk001dr6g1739p0jt6","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xhm001fr6g1fg7xvwkm","level":"info","message":"Get agent health request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd70002r6g1ufsjbsns"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdvx9xhp001ir6g16t9xrhh3/health","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xhs001lr6g1cwt2e3qg","level":"info","message":"Manual health check request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"level":"error","message":"Health check failed No adapter found for platform cmdvx9xd90003r6g1uicy0cha","stack":"Error: No adapter found for platform cmdvx9xd90003r6g1uicy0cha\n    at AgentService.performHealthCheck (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:570:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:517:22","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xhs001lr6g1cwt2e3qg","level":"info","message":"Manual health check completed","status":"unhealthy","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"POST","path":"/cmdvx9xhw001or6g17yr8k51b/health-check","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd70002r6g1ufsjbsns","userRole":"VIEWER"}
{"agentId":"invalid-agent-id","level":"info","message":"Manual health check request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"level":"error","message":"Health check failed Agent with ID invalid-agent-id not found","stack":"Error: Agent with ID invalid-agent-id not found\n    at AgentService.performHealthCheck (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:565:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:517:22","timestamp":"2025-08-03 22:25:22"}
{"agentId":"invalid-agent-id","level":"info","message":"Manual health check completed","status":"unhealthy","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/cmdvx9xi2001tr6g1moqsfgak/health-check","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xi4001vr6g1dgk1sbb0","config":{"enabled":true,"interval":60000,"retries":3,"timeout":15000},"level":"info","message":"Configure health monitoring request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"agentId":"cmdvx9xi4001vr6g1dgk1sbb0","config":{"enabled":true,"interval":60000,"retries":3,"timeout":15000},"level":"info","message":"Configuring health monitoring","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xi4001vr6g1dgk1sbb0","interval":60000,"level":"info","message":"Health monitoring started","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xi4001vr6g1dgk1sbb0","level":"info","message":"Health monitoring configured","timestamp":"2025-08-03 22:25:22"}
{"agentId":"cmdvx9xi4001vr6g1dgk1sbb0","level":"info","message":"Health monitoring configured","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"errors":[{"code":"too_small","inclusive":true,"message":"Too small: expected number to be >=1000","minimum":1000,"origin":"number","path":["interval"]},{"code":"too_big","inclusive":true,"maximum":60000,"message":"Too big: expected number to be <=60000","origin":"number","path":["timeout"]},{"code":"too_big","inclusive":true,"maximum":5,"message":"Too big: expected number to be <=5","origin":"number","path":["retries"]}],"level":"warn","message":"Validation failed","method":"POST","path":"/cmdvx9xi7001xr6g1d1oinowx/health-config","source":"body","timestamp":"2025-08-03 22:25:22"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"POST","path":"/cmdvx9xia001zr6g1dezx8ym9/health-config","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd70002r6g1ufsjbsns","userRole":"VIEWER"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/cmdvx9xid0021r6g1e1lgytox/health-config","timestamp":"2025-08-03 22:25:22"}
{"level":"info","message":"Agent discovery request","platformId":"cmdvx9xd90003r6g1uicy0cha","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"level":"info","message":"Starting agent discovery","platformId":"cmdvx9xd90003r6g1uicy0cha","timestamp":"2025-08-03 22:25:22"}
{"discovered":0,"errors":["No adapter found for platform Test Platform"],"level":"info","message":"Agent discovery completed","registered":0,"timestamp":"2025-08-03 22:25:22","updated":0}
{"level":"info","message":"Agent discovery completed","result":{"discovered":0,"errors":["No adapter found for platform Test Platform"],"registered":0,"updated":0},"timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"level":"info","message":"Agent discovery request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"level":"info","message":"Starting agent discovery","timestamp":"2025-08-03 22:25:22"}
{"discovered":0,"errors":["No adapter found for platform Test Platform"],"level":"info","message":"Agent discovery completed","registered":0,"timestamp":"2025-08-03 22:25:22","updated":0}
{"level":"info","message":"Agent discovery completed","result":{"discovered":0,"errors":["No adapter found for platform Test Platform"],"registered":0,"updated":0},"timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd60001r6g1ziwl3l6g"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"POST","path":"/discover","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd70002r6g1ufsjbsns","userRole":"VIEWER"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-03 22:25:22"}
{"level":"info","message":"Get health monitoring status request","timestamp":"2025-08-03 22:25:22","userId":"cmdvx9xd70002r6g1ufsjbsns"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-03 22:25:22"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-03 22:25:22"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-03 22:25:22"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-03 22:26:24"}
{"level":"info","message":"Audit logs table initialized successfully","timestamp":"2025-08-03 22:26:24"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-03 22:26:24"}
{"filters":{},"level":"info","message":"Get agents request","pagination":{},"timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y90002r6z0a20yj1qv"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get agents \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 22:26:24"}
{"clientVersion":"6.13.0","level":"error","message":"Get agents failed \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 22:26:24"}
{"filters":{"status":"ACTIVE"},"level":"info","message":"Get agents request","pagination":{},"timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y90002r6z0a20yj1qv"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get agents \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {\n    status: \"ACTIVE\"\n  },\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {\n    status: \"ACTIVE\"\n  },\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 22:26:24"}
{"clientVersion":"6.13.0","level":"error","message":"Get agents failed \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {\n    status: \"ACTIVE\"\n  },\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {\n    status: \"ACTIVE\"\n  },\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 22:26:24"}
{"filters":{"search":"Agent 1"},"level":"info","message":"Get agents request","pagination":{},"timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y90002r6z0a20yj1qv"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get agents \nInvalid `prisma.agent.count()` invocation:\n\n{\n  select: {\n    _count: {\n      select: {\n        _all: true\n      }\n    }\n  },\n  where: {\n    OR: [\n      {\n        name: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      },\n      {\n        description: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      }\n    ]\n  }\n}\n\nUnknown argument `mode`. Did you mean `lte`? Available options are marked with ?.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.count()` invocation:\n\n{\n  select: {\n    _count: {\n      select: {\n        _all: true\n      }\n    }\n  },\n  where: {\n    OR: [\n      {\n        name: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      },\n      {\n        description: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      }\n    ]\n  }\n}\n\nUnknown argument `mode`. Did you mean `lte`? Available options are marked with ?.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:342:21)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 22:26:24"}
{"clientVersion":"6.13.0","level":"error","message":"Get agents failed \nInvalid `prisma.agent.count()` invocation:\n\n{\n  select: {\n    _count: {\n      select: {\n        _all: true\n      }\n    }\n  },\n  where: {\n    OR: [\n      {\n        name: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      },\n      {\n        description: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      }\n    ]\n  }\n}\n\nUnknown argument `mode`. Did you mean `lte`? Available options are marked with ?.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.count()` invocation:\n\n{\n  select: {\n    _count: {\n      select: {\n        _all: true\n      }\n    }\n  },\n  where: {\n    OR: [\n      {\n        name: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      },\n      {\n        description: {\n          contains: \"Agent 1\",\n          mode: \"insensitive\"\n        }\n      }\n    ]\n  }\n}\n\nUnknown argument `mode`. Did you mean `lte`? Available options are marked with ?.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:342:21)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-03 22:26:24"}
{"filters":{},"level":"info","message":"Get agents request","pagination":{"limit":"1","page":"1"},"timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y90002r6z0a20yj1qv"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-03 22:26:24"}
{"errors":[{"code":"invalid_value","message":"Invalid option: expected one of \"ACTIVE\"|\"INACTIVE\"|\"ERROR\"|\"MAINTENANCE\"","path":["status"],"values":["ACTIVE","INACTIVE","ERROR","MAINTENANCE"]}],"level":"warn","message":"Validation failed","method":"GET","path":"/","source":"query","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb905000hr6z0b39apbbw","level":"info","message":"Get agent by ID request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y90002r6z0a20yj1qv"}
{"agentId":"invalid-agent-id","level":"info","message":"Get agent by ID request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y90002r6z0a20yj1qv"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdvxb90b000lr6z0rz1cndxz","timestamp":"2025-08-03 22:26:24"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"cmdvxb8yb0003r6z0bvqh3gax"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"cmdvxb8yb0003r6z0bvqh3gax","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb90k000nr6z0l9dh6ran","interval":30000,"level":"info","message":"Health monitoring started","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb90k000nr6z0l9dh6ran","level":"info","message":"Agent registered successfully","name":"New Test Agent","platformId":"cmdvxb8yb0003r6z0bvqh3gax","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb90k000nr6z0l9dh6ran","level":"info","message":"Agent created successfully","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"cmdvxb8yb0003r6z0bvqh3gax"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y70000r6z0fv9k79zz"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"cmdvxb8yb0003r6z0bvqh3gax","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb90o000pr6z0c8imst90","interval":30000,"level":"info","message":"Health monitoring started","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb90o000pr6z0c8imst90","level":"info","message":"Agent registered successfully","name":"New Test Agent","platformId":"cmdvxb8yb0003r6z0bvqh3gax","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb90o000pr6z0c8imst90","level":"info","message":"Agent created successfully","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y70000r6z0fv9k79zz"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"POST","path":"/","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y90002r6z0a20yj1qv","userRole":"VIEWER"}
{"errors":[{"code":"too_small","inclusive":true,"message":"Agent name is required","minimum":1,"origin":"string","path":["name"]}],"level":"warn","message":"Validation failed","method":"POST","path":"/","source":"body","timestamp":"2025-08-03 22:26:24"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"cmdvxb8yb0003r6z0bvqh3gax"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"cmdvxb8yb0003r6z0bvqh3gax","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb90v000rr6z04sw3tzzf","interval":30000,"level":"info","message":"Health monitoring started","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb90v000rr6z04sw3tzzf","level":"info","message":"Agent registered successfully","name":"New Test Agent","platformId":"cmdvxb8yb0003r6z0bvqh3gax","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb90v000rr6z04sw3tzzf","level":"info","message":"Agent created successfully","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"cmdvxb8yb0003r6z0bvqh3gax"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"cmdvxb8yb0003r6z0bvqh3gax","timestamp":"2025-08-03 22:26:24"}
{"level":"error","message":"Failed to register agent Agent with external ID new-test-agent-001 already exists on platform cmdvxb8yb0003r6z0bvqh3gax","stack":"Error: Agent with external ID new-test-agent-001 already exists on platform cmdvxb8yb0003r6z0bvqh3gax\n    at AgentService.registerAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:164:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:289:21","timestamp":"2025-08-03 22:26:24"}
{"level":"error","message":"Create agent failed Agent with external ID new-test-agent-001 already exists on platform cmdvxb8yb0003r6z0bvqh3gax","stack":"Error: Agent with external ID new-test-agent-001 already exists on platform cmdvxb8yb0003r6z0bvqh3gax\n    at AgentService.registerAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:164:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:289:21","timestamp":"2025-08-03 22:26:24"}
{"agentData":{"capabilities":["test","automation"],"configuration":"[REDACTED]","description":"A new test agent","externalId":"new-test-agent-001","name":"New Test Agent","platformId":"invalid-platform-id"},"level":"info","message":"Create agent request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"externalId":"new-test-agent-001","level":"info","message":"Registering new agent","name":"New Test Agent","platformId":"invalid-platform-id","timestamp":"2025-08-03 22:26:24"}
{"level":"error","message":"Failed to register agent Platform with ID invalid-platform-id not found","stack":"Error: Platform with ID invalid-platform-id not found\n    at AgentService.registerAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:148:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:289:21","timestamp":"2025-08-03 22:26:24"}
{"level":"error","message":"Create agent failed Platform with ID invalid-platform-id not found","stack":"Error: Platform with ID invalid-platform-id not found\n    at AgentService.registerAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:148:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:289:21","timestamp":"2025-08-03 22:26:24"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb918000tr6z029cipzs2","level":"info","message":"Update agent request","timestamp":"2025-08-03 22:26:24","updateData":{"capabilities":["test","automation","updated"],"configuration":"[REDACTED]","description":"Updated description","name":"Updated Test Agent","status":"ACTIVE"},"userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"agentId":"cmdvxb918000tr6z029cipzs2","level":"info","message":"Updating agent","timestamp":"2025-08-03 22:26:24","updateData":{"capabilities":["test","automation","updated"],"configuration":{"newFeature":true,"testMode":false},"description":"Updated description","name":"Updated Test Agent","status":"ACTIVE"}}
{"agentId":"cmdvxb918000tr6z029cipzs2","level":"info","message":"Agent updated successfully","name":"Updated Test Agent","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb918000tr6z029cipzs2","level":"info","message":"Agent updated successfully","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"agentId":"cmdvxb91d000vr6z07rchtvbr","level":"info","message":"Update agent request","timestamp":"2025-08-03 22:26:24","updateData":{"name":"Updated by Admin"},"userId":"cmdvxb8y70000r6z0fv9k79zz"}
{"agentId":"cmdvxb91d000vr6z07rchtvbr","level":"info","message":"Updating agent","timestamp":"2025-08-03 22:26:24","updateData":{"name":"Updated by Admin"}}
{"agentId":"cmdvxb91d000vr6z07rchtvbr","level":"info","message":"Agent updated successfully","name":"Updated by Admin","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb91d000vr6z07rchtvbr","level":"info","message":"Agent updated successfully","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y70000r6z0fv9k79zz"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"PUT","path":"/cmdvxb91g000xr6z0117nv63w","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y90002r6z0a20yj1qv","userRole":"VIEWER"}
{"agentId":"invalid-agent-id","level":"info","message":"Update agent request","timestamp":"2025-08-03 22:26:24","updateData":{"name":"Updated Name"},"userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"agentId":"invalid-agent-id","level":"info","message":"Updating agent","timestamp":"2025-08-03 22:26:24","updateData":{"name":"Updated Name"}}
{"level":"error","message":"Failed to update agent Agent with ID invalid-agent-id not found","stack":"Error: Agent with ID invalid-agent-id not found\n    at AgentService.updateAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:225:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:362:21","timestamp":"2025-08-03 22:26:24"}
{"level":"error","message":"Update agent failed Agent with ID invalid-agent-id not found","stack":"Error: Agent with ID invalid-agent-id not found\n    at AgentService.updateAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:225:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:362:21","timestamp":"2025-08-03 22:26:24"}
{"errors":[{"code":"too_small","inclusive":true,"message":"Too small: expected string to have >=1 characters","minimum":1,"origin":"string","path":["name"]},{"code":"invalid_value","message":"Invalid option: expected one of \"ACTIVE\"|\"INACTIVE\"|\"MAINTENANCE\"","path":["status"],"values":["ACTIVE","INACTIVE","MAINTENANCE"]}],"level":"warn","message":"Validation failed","method":"PUT","path":"/cmdvxb91l0011r6z0qg957bcj","source":"body","timestamp":"2025-08-03 22:26:24"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdvxb91o0013r6z042kzlfyo","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb91q0015r6z099ihf398","level":"info","message":"Delete agent request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y70000r6z0fv9k79zz"}
{"agentId":"cmdvxb91q0015r6z099ihf398","level":"info","message":"Deleting agent","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb91q0015r6z099ihf398","level":"info","message":"Agent deleted successfully","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb91q0015r6z099ihf398","level":"info","message":"Agent deleted successfully","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y70000r6z0fv9k79zz"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"DELETE","path":"/cmdvxb91t0017r6z01myt2q0p","requiredRoles":["ADMIN"],"timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g","userRole":"OPERATOR"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"DELETE","path":"/cmdvxb91v0019r6z0cbnlmy2p","requiredRoles":["ADMIN"],"timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y90002r6z0a20yj1qv","userRole":"VIEWER"}
{"agentId":"invalid-agent-id","level":"info","message":"Delete agent request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y70000r6z0fv9k79zz"}
{"agentId":"invalid-agent-id","level":"info","message":"Deleting agent","timestamp":"2025-08-03 22:26:24"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to delete agent \nInvalid `prisma.agent.delete()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.","meta":{"cause":"No record was found for a delete.","modelName":"Agent"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.agent.delete()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.deleteAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:385:7)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:419:7","timestamp":"2025-08-03 22:26:24"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Delete agent failed \nInvalid `prisma.agent.delete()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.","meta":{"cause":"No record was found for a delete.","modelName":"Agent"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.agent.delete()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.deleteAgent (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:385:7)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:419:7","timestamp":"2025-08-03 22:26:24"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdvxb920001dr6z0d9nxk89m","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb922001fr6z0ska8fr7a","level":"info","message":"Get agent health request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y90002r6z0a20yj1qv"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdvxb925001ir6z025260mn2/health","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb927001lr6z0u1fmsfkl","level":"info","message":"Manual health check request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"level":"error","message":"Health check failed No adapter found for platform cmdvxb8yb0003r6z0bvqh3gax","stack":"Error: No adapter found for platform cmdvxb8yb0003r6z0bvqh3gax\n    at AgentService.performHealthCheck (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:570:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:517:22","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb927001lr6z0u1fmsfkl","level":"info","message":"Manual health check completed","status":"unhealthy","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"POST","path":"/cmdvxb92b001or6z00v76rxav/health-check","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y90002r6z0a20yj1qv","userRole":"VIEWER"}
{"agentId":"invalid-agent-id","level":"info","message":"Manual health check request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"level":"error","message":"Health check failed Agent with ID invalid-agent-id not found","stack":"Error: Agent with ID invalid-agent-id not found\n    at AgentService.performHealthCheck (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:565:15)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:517:22","timestamp":"2025-08-03 22:26:24"}
{"agentId":"invalid-agent-id","level":"info","message":"Manual health check completed","status":"unhealthy","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/cmdvxb92g001tr6z0k9u27od2/health-check","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb92i001vr6z08tylrzse","config":{"enabled":true,"interval":60000,"retries":3,"timeout":15000},"level":"info","message":"Configure health monitoring request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"agentId":"cmdvxb92i001vr6z08tylrzse","config":{"enabled":true,"interval":60000,"retries":3,"timeout":15000},"level":"info","message":"Configuring health monitoring","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb92i001vr6z08tylrzse","interval":60000,"level":"info","message":"Health monitoring started","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb92i001vr6z08tylrzse","level":"info","message":"Health monitoring configured","timestamp":"2025-08-03 22:26:24"}
{"agentId":"cmdvxb92i001vr6z08tylrzse","level":"info","message":"Health monitoring configured","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"errors":[{"code":"too_small","inclusive":true,"message":"Too small: expected number to be >=1000","minimum":1000,"origin":"number","path":["interval"]},{"code":"too_big","inclusive":true,"maximum":60000,"message":"Too big: expected number to be <=60000","origin":"number","path":["timeout"]},{"code":"too_big","inclusive":true,"maximum":5,"message":"Too big: expected number to be <=5","origin":"number","path":["retries"]}],"level":"warn","message":"Validation failed","method":"POST","path":"/cmdvxb92l001xr6z0w2znq0e0/health-config","source":"body","timestamp":"2025-08-03 22:26:24"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"POST","path":"/cmdvxb92o001zr6z08lwhpbgy/health-config","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y90002r6z0a20yj1qv","userRole":"VIEWER"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/cmdvxb92q0021r6z0udyutvx1/health-config","timestamp":"2025-08-03 22:26:24"}
{"level":"info","message":"Agent discovery request","platformId":"cmdvxb8yb0003r6z0bvqh3gax","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"level":"info","message":"Starting agent discovery","platformId":"cmdvxb8yb0003r6z0bvqh3gax","timestamp":"2025-08-03 22:26:24"}
{"discovered":0,"errors":["No adapter found for platform Test Platform"],"level":"info","message":"Agent discovery completed","registered":0,"timestamp":"2025-08-03 22:26:24","updated":0}
{"level":"info","message":"Agent discovery completed","result":{"discovered":0,"errors":["No adapter found for platform Test Platform"],"registered":0,"updated":0},"timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"level":"info","message":"Agent discovery request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"level":"info","message":"Starting agent discovery","timestamp":"2025-08-03 22:26:24"}
{"discovered":0,"errors":["No adapter found for platform Test Platform"],"level":"info","message":"Agent discovery completed","registered":0,"timestamp":"2025-08-03 22:26:24","updated":0}
{"level":"info","message":"Agent discovery completed","result":{"discovered":0,"errors":["No adapter found for platform Test Platform"],"registered":0,"updated":0},"timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y80001r6z05e9ogc3g"}
{"level":"warn","message":"Authorization failed: Insufficient role","method":"POST","path":"/discover","requiredRoles":["ADMIN","OPERATOR"],"timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y90002r6z0a20yj1qv","userRole":"VIEWER"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-03 22:26:24"}
{"level":"info","message":"Get health monitoring status request","timestamp":"2025-08-03 22:26:24","userId":"cmdvxb8y90002r6z0a20yj1qv"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-03 22:26:24"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-03 22:26:24"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-03 22:26:24"}
