{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:05:10"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxtnvt0004r6vnn9jhhtmh\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxtnvt0004r6vnn9jhhtmh\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxtnvt0004r6vnn9jhhtmh\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxtnvt0004r6vnn9jhhtmh\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:10"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:10"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"in_app\\\",\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"system_error\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"in_app\\\",\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"system_error\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxtny80009r6vn7t4atqou\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:05:10"}
{"filters":{},"level":"info","message":"Get agents request","pagination":{},"timestamp":"2025-08-02 13:05:10","userId":"cmdtxtnxg0002r6vlycxlky3v"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get agents \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-02 13:05:11"}
{"clientVersion":"6.13.0","level":"error","message":"Get agents failed \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.agent.findMany()` invocation:\n\n{\n  where: {},\n  include: {\n    platform: true\n  },\n  orderBy: {\n    createdAt: \"desc\"\n  },\n  skip: NaN,\n+ take: Int\n}\n\nArgument `take` is missing.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at AgentService.getAgents (/Users/akashrathod/Desktop/cubcen/src/services/agent.ts:345:22)\n    at /Users/akashrathod/Desktop/cubcen/src/backend/routes/agents.ts:175:22","timestamp":"2025-08-02 13:05:11"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:11"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to create notification channel \nInvalid `prisma.notificationChannel.create()` invocation:\n\n{\n  data: {\n    type: \"in_app\",\n          ~~~~~~~~\n    name: \"In-App Channel\",\n    enabled: true,\n    configuration: \"{\\\"maxNotifications\\\":100}\"\n  }\n}\n\nInvalid value for argument `type`. Expected NotificationChannelType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationChannel.create()` invocation:\n\n{\n  data: {\n    type: \"in_app\",\n          ~~~~~~~~\n    name: \"In-App Channel\",\n    enabled: true,\n    configuration: \"{\\\"maxNotifications\\\":100}\"\n  }\n}\n\nInvalid value for argument `type`. Expected NotificationChannelType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.createNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:213:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:286:23)","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxto0c000hr6vlfb0vctqj","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxto0m000lr6vlu2dr1kbt","timestamp":"2025-08-02 13:05:11"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxto0t000vr6vn9rq4nyxh\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxto0t000vr6vn9rq4nyxh\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:11"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxto11000wr6vnzb6fe6ar\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxto11000wr6vnzb6fe6ar\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxto11000wr6vnzb6fe6ar\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxto11000wr6vnzb6fe6ar\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:11"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxto1d000xr6vnqr6o0qad\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxto1d000xr6vnqr6o0qad\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxto1d000xr6vnqr6o0qad\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxto1d000xr6vnqr6o0qad\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxto1o000nr6vlhjnp7r73","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxto1v000pr6vlmf7dzafv","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxto22000rr6vlh4sx7q0o","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/invalid-agent-id","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxto2g000vr6vl64bmopzv","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxto2o000xr6vlrgxfpacm","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxto2t000zr6vl4hj2vfpa","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:05:11"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:05:11"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:05:11"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:05:11"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:05:27"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu0tw0004r60koxi39ap7\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxu0tw0004r60koxi39ap7\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu0tw0004r60koxi39ap7\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxu0tw0004r60koxi39ap7\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"in_app\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"in_app\\\",\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"system_error\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"in_app\\\",\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"in_app\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"system_error\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"email\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxu0vf0009r60k7ohpwq8e\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"email\\\",\\\"slack\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:27"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:27"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:27"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to create notification channel \nInvalid `prisma.notificationChannel.create()` invocation:\n\n{\n  data: {\n    type: \"in_app\",\n          ~~~~~~~~\n    name: \"In-App Channel\",\n    enabled: true,\n    configuration: \"{\\\"maxNotifications\\\":100}\"\n  }\n}\n\nInvalid value for argument `type`. Expected NotificationChannelType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationChannel.create()` invocation:\n\n{\n  data: {\n    type: \"in_app\",\n          ~~~~~~~~\n    name: \"In-App Channel\",\n    enabled: true,\n    configuration: \"{\\\"maxNotifications\\\":100}\"\n  }\n}\n\nInvalid value for argument `type`. Expected NotificationChannelType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.createNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:213:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:286:23)","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxu0z4000hr60i0qae1tcx","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxu106000lr60ieimoc0nf","timestamp":"2025-08-02 13:05:27"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu10e000vr60kf9lyjjsp\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu10e000vr60kf9lyjjsp\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:27"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu10p000wr60k4rj9zjxt\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxu10p000wr60k4rj9zjxt\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu10p000wr60k4rj9zjxt\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxu10p000wr60k4rj9zjxt\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:27"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu115000xr60kd24l2x12\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxu115000xr60kd24l2x12\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxu115000xr60kd24l2x12\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxu115000xr60kd24l2x12\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"email\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxu11u000nr60i8dz3g8dj","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxu127000pr60ittgw5vhv","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxu12d000rr60ixzkyrg41","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/invalid-agent-id","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxu12y000vr60i97f5a7vh","timestamp":"2025-08-02 13:05:27"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:28"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:28"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:28"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:28"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:05:28"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:05:28"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:05:28"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:05:28"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:05:55"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxumju0004r67ik5t2jvii\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxumju0004r67ik5t2jvii\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxumju0004r67ik5t2jvii\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxumju0004r67ik5t2jvii\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxumlg0009r67ixb77a7nm\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:05:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:05:55"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxumn9000hr67ge7zu4eyr","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxumnn000lr67g4p99e2un","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:55"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxumoa000sr67ic60s2okc\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxumoa000sr67ic60s2okc\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:55"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:56"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxumot000tr67i888u28es\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxumot000tr67i888u28es\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxumot000tr67i888u28es\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxumot000tr67i888u28es\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxump3000nr67gvvfmn4y7","timestamp":"2025-08-02 13:05:56"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxump6000ur67imqflxtth\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxump6000ur67imqflxtth\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxump6000ur67imqflxtth\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxump6000ur67imqflxtth\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxump7000pr67gcp9daotu","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxumpc000rr67gjvzgn6ai","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/invalid-agent-id","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxumpl000vr67g4yj534df","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxumpt000xr67g7xxfhen0","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxumpz000zr67gw0613vjf","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxumq50011r67g592tz44i","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxumqa0013r67ggmx8l738","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/invalid-agent-id","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxumqf0017r67gvbjid154","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxumqi0019r67g96zqn4x8/health","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxumql001cr67gvzmrz9mu/health","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/cmdtxumqn001fr67gbzyzkogt/health-check","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/cmdtxumqr001hr67gu8sj9hgi/health-check","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/invalid-agent-id/health-check","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/cmdtxumr8001lr67g5wl73au2/health-check","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/cmdtxumrc001nr67gmj853vns/health-config","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:05:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:05:56"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:05:56"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:05:56"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:06:18"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv3t20004r6c8asf0t6jf\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxv3t20004r6c8asf0t6jf\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv3t20004r6c8asf0t6jf\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxv3t20004r6c8asf0t6jf\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxv3u90009r6c8f5ejntr9\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:06:18"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:06:18"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv3wx000sr6c8o7x8aw85\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv3wx000sr6c8o7x8aw85\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:06:18"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv3xi000tr6c856kz0ml1\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxv3xi000tr6c856kz0ml1\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv3xi000tr6c856kz0ml1\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxv3xi000tr6c856kz0ml1\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxv3xx000hr6c9ah97ikij","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxv3y8000lr6c9qo17q5g9","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxv3yz000nr6c9gfxf3c6d","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxv3z5000pr6c9lehy27td","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxv3za000rr6c9z25ugpf1","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/invalid-agent-id","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxv3zp000vr6c9jdwr7x3n","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxv3zt000xr6c97nnpcwdo","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxv400000zr6c9j1b4x03r","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxv4030011r6c9t83p1r9j","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxv4050013r6c9aaf0hmzn","timestamp":"2025-08-02 13:06:18"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv40h000ur6c8z2xupqt6\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxv40h000ur6c8z2xupqt6\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxv40h000ur6c8z2xupqt6\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxv40h000ur6c8z2xupqt6\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:06:18"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:06:18"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:06:18"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:07:01"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1i30004r6iqn8m8uzln\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxw1i30004r6iqn8m8uzln\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1i30004r6iqn8m8uzln\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxw1i30004r6iqn8m8uzln\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxw1jk0009r6iqulny8529\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:01"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:07:01"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:02"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:02"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:02"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxw1po000hr6ioosuce49p","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxw1qc000lr6iox6fy7tzw","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:02"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1qh000sr6iqqnafp1mj\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1qh000sr6iqqnafp1mj\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:02"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1sq000tr6iqzs9p5yqt\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxw1sq000tr6iqzs9p5yqt\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1sq000tr6iqzs9p5yqt\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxw1sq000tr6iqzs9p5yqt\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:02"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1u1000ur6iq09s4j61k\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxw1u1000ur6iq09s4j61k\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxw1u1000ur6iq09s4j61k\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxw1u1000ur6iq09s4j61k\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:07:02"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:07:02"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:07:02"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:07:02"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:07:28"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmdq0004r6nr9tkx4cxi\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxwmdq0004r6nr9tkx4cxi\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmdq0004r6nr9tkx4cxi\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxwmdq0004r6nr9tkx4cxi\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:28"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:28"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:29"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:07:29"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:29"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:29"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxwmin0009r6nrhjjcprxk\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:29"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:29"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:29"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:29"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxwml2000hr6npgs7b3dva","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxwmli000lr6npuvntmquh","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxwmpa000nr6npp1owgj7e","timestamp":"2025-08-02 13:07:29"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmpa000sr6nrk4gwdk0e\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmpa000sr6nrk4gwdk0e\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxwmph000pr6npyf7p2av9","timestamp":"2025-08-02 13:07:29"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmpk000tr6nru1v0y5kp\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxwmpk000tr6nru1v0y5kp\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmpk000tr6nru1v0y5kp\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxwmpk000tr6nru1v0y5kp\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxwmpn000rr6np04hpsfva","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/invalid-agent-id","timestamp":"2025-08-02 13:07:29"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmpv000ur6nry5nle5ox\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxwmpv000ur6nry5nle5ox\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxwmpv000ur6nry5nle5ox\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxwmpv000ur6nry5nle5ox\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxwmpz000vr6nph7ijgu4c","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxwmq6000xr6npiypk3qgb","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxwmqb000zr6np7guqooqm","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxwmqk0011r6nps3b2pqjo","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/cmdtxwmqr0013r6npdsughp3n","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"DELETE","path":"/invalid-agent-id","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:07:29"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:07:29"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:07:29"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:07:55"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:07:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:55"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:55"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7bk0004r6tiwarzm3pm\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxx7bk0004r6tiwarzm3pm\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7bk0004r6tiwarzm3pm\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxx7bk0004r6tiwarzm3pm\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxx7d40009r6tirq2kcrqi\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:07:56"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:56"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7jt000sr6tib5u186a6\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7jt000sr6tib5u186a6\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:56"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7kc000tr6tip3ov3zkz\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxx7kc000tr6tip3ov3zkz\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7kc000tr6tip3ov3zkz\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxx7kc000tr6tip3ov3zkz\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:07:56"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7kq000ur6tii1ncilj9\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxx7kq000ur6tii1ncilj9\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxx7kq000ur6tii1ncilj9\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxx7kq000ur6tii1ncilj9\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxx7kv000hr6tg10be86cv","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxx7mg000lr6tg4ofkag36","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxx7py000nr6tg6jht34ig","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxx7q6000pr6tg095ddmub","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxx7qn000rr6tgex713ath","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/invalid-agent-id","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxx7r6000vr6tgggvxsvwt","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxx7rn000xr6tgqigsw8mu","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:07:56"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:07:56"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:07:56"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:08:15"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmhv0004r6xxw3bcikw3\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxxmhv0004r6xxw3bcikw3\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmhv0004r6xxw3bcikw3\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxxmhv0004r6xxw3bcikw3\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:15"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:15"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxxmom0009r6xxel4f92m1\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:08:15"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:08:16"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:16"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmv2000sr6xx1d7tlyu8\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmv2000sr6xx1d7tlyu8\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:16"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmvd000tr6xxhw64pxyt\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxxmvd000tr6xxhw64pxyt\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmvd000tr6xxhw64pxyt\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxxmvd000tr6xxhw64pxyt\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxxmws000hr6xvilpth79w","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:08:16"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmxw000ur6xxdb6wvm9y\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxxmxw000ur6xxdb6wvm9y\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxxmxw000ur6xxdb6wvm9y\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxxmxw000ur6xxdb6wvm9y\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxxmy8000lr6xvwqavf5bc","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:08:16"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:08:16"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:08:16"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:08:39"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5310004r62ji3epwctv\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxy5310004r62ji3epwctv\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5310004r62ji3epwctv\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxy5310004r62ji3epwctv\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:08:39"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxy56e0009r62j7k0k8re9\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:39"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:39"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:39"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:08:40"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:40"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:40"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:40"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:40"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:40"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:40"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:08:40"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxy5ax000hr62hy89c3was","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:08:40"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5d0000sr62jnkofjyjs\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5d0000sr62jnkofjyjs\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxy5d4000lr62htx935bx4","timestamp":"2025-08-02 13:08:40"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5dj000tr62j7le3kzzk\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxy5dj000tr62j7le3kzzk\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5dj000tr62j7le3kzzk\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxy5dj000tr62j7le3kzzk\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:08:40"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5e1000ur62jbvnxz0v7\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxy5e1000ur62jbvnxz0v7\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxy5e1000ur62jbvnxz0v7\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxy5e1000ur62jbvnxz0v7\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"PUT","path":"/cmdtxy5fd000nr62h5ju504kx","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:08:40"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:08:40"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:08:40"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:08:40"}
{"level":"warn","message":"Email configuration incomplete, email notifications disabled","timestamp":"2025-08-02 13:09:33"}
{"level":"warn","message":"Slack token not configured, Slack notifications disabled","timestamp":"2025-08-02 13:09:33"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to update user preference \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzb6x0004r6a86401wubh\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxzb6x0004r6a86401wubh\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzb6x0004r6a86401wubh\",\n      eventType: \"task_failed\"\n                 ~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxzb6x0004r6a86401wubh\",\n    eventType: \"task_failed\",\n    channels: \"[\\\"IN_APP\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateUserPreference (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:48:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:91:26)","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to initialize user preferences \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.createMany()` invocation:\n\n{\n  data: [\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"agent_down\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"agent_error\",\n      channels: \"[\\\"IN_APP\\\",\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"task_failed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"task_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"workflow_failed\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"workflow_completed\",\n      channels: \"[\\\"IN_APP\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"system_error\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"health_check_failed\",\n      channels: \"[\\\"EMAIL\\\"]\",\n      enabled: true\n    },\n    {\n      userId: \"cmdtxzbc00009r6a8qnxoybue\",\n      eventType: \"platform_disconnected\",\n      channels: \"[\\\"EMAIL\\\",\\\"SLACK\\\"]\",\n      enabled: true\n    }\n  ]\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.initializeUserPreferences (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:144:9)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:165:7)","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"error","message":"Failed to initialize email transporter _nodemailer.default.createTransport is not a function","stack":"TypeError: _nodemailer.default.createTransport is not a function\n    at CubcenNotificationService.createTransport [as initializeEmailTransporter] (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:51:44)\n    at new initializeEmailTransporter (/Users/akashrathod/Desktop/cubcen/src/services/notification.ts:33:10)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification.test.ts:57:27)\n    at Promise.finally.completed (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusHook (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:978:40)\n    at _runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:943:5)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/akashrathod/Desktop/cubcen/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/akashrathod/Desktop/cubcen/node_modules/jest-runner/build/testWorker.js:497:12)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Slack client initialized","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:09:34"}
{"clientVersion":"6.13.0","code":"P2025","level":"error","message":"Failed to update notification channel \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.","meta":{"cause":"No record was found for an update.","modelName":"NotificationChannel"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.notificationChannel.update()` invocation:\n\n\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ri.handleRequestError (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7459)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.updateNotificationChannel (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:187:23)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:276:7)","timestamp":"2025-08-02 13:09:34"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:09:34"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to get user preferences for event \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzbkr000sr6a8mtr4bpby\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.findUnique()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzbkr000sr6a8mtr4bpby\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)\n    at NotificationPreferencesService.getUserPreferencesForEvent (/Users/akashrathod/Desktop/cubcen/src/services/notification-preferences.ts:241:26)\n    at Object.<anonymous> (/Users/akashrathod/Desktop/cubcen/src/services/__tests__/notification-preferences.test.ts:350:24)","timestamp":"2025-08-02 13:09:34"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:09:34"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzbl9000tr6a8kpperg2y\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxzbl9000tr6a8kpperg2y\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzbl9000tr6a8kpperg2y\",\n      eventType: \"agent_down\"\n                 ~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  },\n  create: {\n    userId: \"cmdtxzbl9000tr6a8kpperg2y\",\n    eventType: \"agent_down\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: 15\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:09:34"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:09:34"}
{"clientVersion":"6.13.0","level":"error","message":"Failed to bulk update preferences \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzblp000ur6a8mnx5xo6j\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxzblp000ur6a8mnx5xo6j\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.","name":"PrismaClientValidationError","stack":"PrismaClientValidationError: \nInvalid `prisma.notificationPreference.upsert()` invocation:\n\n{\n  where: {\n    userId_eventType: {\n      userId: \"cmdtxzblp000ur6a8mnx5xo6j\",\n      eventType: \"INVALID_EVENT_TYPE\"\n                 ~~~~~~~~~~~~~~~~~~~~\n    }\n  },\n  update: {\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  },\n  create: {\n    userId: \"cmdtxzblp000ur6a8mnx5xo6j\",\n    eventType: \"INVALID_EVENT_TYPE\",\n    channels: \"[\\\"EMAIL\\\"]\",\n    enabled: true,\n    escalationDelay: undefined\n  }\n}\n\nInvalid value for argument `eventType`. Expected NotificationEventType.\n    at _n (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:32:1363)\n    at ri._n [as handleRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:7102)\n    at ri.handleRequestError [as handleAndLogRequestError] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6784)\n    at ri.handleAndLogRequestError [as request] (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:124:6491)\n    at l (/Users/akashrathod/Desktop/cubcen/src/generated/prisma/runtime/library.js:133:9812)","timestamp":"2025-08-02 13:09:34"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:09:34"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:09:34"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxzbr2000hr6a5q7vstucx","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/invalid-agent-id","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/cmdtxzbrm000lr6a54mcdulge","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"POST","path":"/discover","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"present","error":"User not found","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:09:35"}
{"authHeader":"missing","error":"Missing or invalid authorization header","level":"warn","message":"Authentication failed","method":"GET","path":"/health-monitoring/status","timestamp":"2025-08-02 13:09:35"}
{"level":"info","message":"Resetting database...","timestamp":"2025-08-02 13:09:35"}
{"level":"info","message":"Database reset completed","timestamp":"2025-08-02 13:09:35"}
